<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Customer | US Signal Webex Partner Portal</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="/styles.css">
</head>

<body>

<!-- =========================================================
     TOP BAR
========================================================= -->
<header class="topbar">
  <div class="brand">
    <img src="/assets/ussignal-logo.jpg" class="logo" alt="US Signal" />
    <div>
      <div class="title">US Signal | Webex Partner Portal</div>
      <div class="subtitle">
        Operational visibility â€¢ Proactive monitoring â€¢ License governance
      </div>
    </div>
  </div>

  <div style="display:flex; align-items:center; gap:16px;">
    <nav class="nav">
      <a href="/">Dashboard</a>
      <a href="/customers">Customers</a>
      <a href="/status">Webex Status</a>
      <a href="/sow">SOW</a>
    </nav>
    <button id="theme-toggle" title="Toggle light/dark mode">ðŸŒ™</button>
  </div>
</header>

<main class="container">

  <!-- =====================================================
       PAGE HEADER
  ====================================================== -->
  <div class="page-head">
    <div>
      <h1 id="cust-name">Customer</h1>
      <div class="muted">
        <span class="mono" id="cust-key">â€”</span>
        <span class="dot-sep">â€¢</span>
        <span class="mono" id="cust-org">OrgID: â€”</span>
      </div>
    </div>

    <div class="actions">
      <button class="btn" id="btn-refresh">Refresh</button>
      <button class="btn btn-primary" id="btn-reeval">Manual Re-eval</button>
      <button class="btn" id="btn-print">Print Report</button>
    </div>
  </div>

  <!-- =====================================================
       HEALTH OVERVIEW
  ====================================================== -->
  <div class="grid-2">
    <div class="card">
      <div class="card-title">Health Summary</div>

      <div class="health-grid">
        <div class="health-cell"><div class="muted">Overall</div><div id="health-overall">â€”</div></div>
        <div class="health-cell"><div class="muted">Calling</div><div id="health-calling">â€”</div></div>
        <div class="health-cell"><div class="muted">Messaging</div><div id="health-messaging">â€”</div></div>
        <div class="health-cell"><div class="muted">Meetings</div><div id="health-meetings">â€”</div></div>
        <div class="health-cell"><div class="muted">Devices</div><div id="health-devices">â€”</div></div>
        <div class="health-cell"><div class="muted">Evaluated</div><div class="mono" id="health-evaluated">â€”</div></div>
      </div>

      <div class="divider"></div>

      <div class="row between">
        <div class="card-title">30-Day Trend</div>
        <div class="muted small" id="trend-hint">â€”</div>
      </div>

      <div id="health-trends" class="trend-wrap muted">
        Trend visualization will appear here.
      </div>

      <div id="transition-banner" class="banner hidden"></div>
    </div>

    <div class="card">
      <div class="row between">
        <div class="card-title">Deficient SKUs</div>
        <button class="btn btn-small" id="btn-email-alert">
          Send License Alert Email
        </button>
      </div>

      <div class="table-wrap">
        <table class="table" id="deficient-table">
          <thead>
            <tr>
              <th>SKU</th>
              <th>Available</th>
              <th>Threshold</th>
            </tr>
          </thead>
          <tbody>
            <tr><td colspan="3" class="muted">Loadingâ€¦</td></tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- =====================================================
       TABS
  ====================================================== -->
  <div class="tabs" role="tablist" aria-label="Customer sections">
    <button class="tab active" data-tab="analytics">Analytics</button>
    <button class="tab" data-tab="pstn">PSTN</button>
    <button class="tab" data-tab="cdr">CDR</button>
    <button class="tab" data-tab="licenses">Licenses</button>
    <button class="tab" data-tab="devices">Devices</button>
    <button class="tab" data-tab="alerts">Health Alerts</button>
    <button class="tab" data-tab="report">Report</button>
  </div>

  <!-- =====================================================
       ANALYTICS TAB
  ====================================================== -->
  <section class="card tabpanel" id="tab-analytics">
    <div class="card-title">Call & Usage Analytics</div>

    <div class="grid summary-grid">
      <div class="card summary">
        <div class="summary-label">Call Volume (30d)</div>
        <div class="summary-value" id="kpi-call-volume">â€”</div>
      </div>
      <div class="card summary">
        <div class="summary-label">Peak Concurrent Calls</div>
        <div class="summary-value" id="kpi-peak-calls">â€”</div>
      </div>
      <div class="card summary">
        <div class="summary-label">Avg Call Duration</div>
        <div class="summary-value" id="kpi-avg-duration">â€”</div>
      </div>
      <div class="card summary">
        <div class="summary-label">Failed Call Rate</div>
        <div class="summary-value" id="kpi-fail-rate">â€”</div>
      </div>
    </div>

    <div class="muted small" style="margin-top:12px;">
      Analytics sourced from Webex Calling & Control Hub analytics APIs.
    </div>
  </section>

  <!-- =====================================================
       PSTN TAB
  ====================================================== -->
  <section class="card tabpanel hidden" id="tab-pstn">
    <div class="card-title">PSTN Health & Trunks</div>

    <div class="grid summary-grid">
      <div class="card summary">
        <div class="summary-label">PSTN Type</div>
        <div class="summary-value" id="pstn-type">â€”</div>
      </div>
      <div class="card summary">
        <div class="summary-label">Sites</div>
        <div class="summary-value" id="pstn-sites">â€”</div>
      </div>
      <div class="card summary">
        <div class="summary-label">Trunks</div>
        <div class="summary-value" id="pstn-trunks">â€”</div>
      </div>
      <div class="card summary">
        <div class="summary-label">Utilization</div>
        <div class="summary-value" id="pstn-util">â€”</div>
      </div>
    </div>

    <div class="table-wrap" style="margin-top:16px;">
      <table class="table" id="pstn-sites-table">
        <thead>
          <tr>
            <th>Site</th>
            <th>PSTN Type</th>
            <th>Trunks</th>
            <th>Utilization</th>
            <th>Health</th>
          </tr>
        </thead>
        <tbody>
          <tr><td colspan="5" class="muted">No PSTN site data available.</td></tr>
        </tbody>
      </table>
    </div>
  </section>

  <!-- =====================================================
       CDR TAB
  ====================================================== -->
  <section class="card tabpanel hidden" id="tab-cdr">
    <div class="card-title">Call Detail Records</div>

    <div class="muted small">
      Filterable call records for troubleshooting, audits, and escalations.
    </div>

    <div class="table-wrap">
      <table class="table" id="cdr-table">
        <thead>
          <tr>
            <th>Time</th>
            <th>From</th>
            <th>To</th>
            <th>Duration</th>
            <th>Result</th>
            <th>Site</th>
          </tr>
        </thead>
        <tbody>
          <tr><td colspan="6" class="muted">CDR data not loaded.</td></tr>
        </tbody>
      </table>
    </div>
  </section>

  <!-- =====================================================
       EXISTING TABS (UNCHANGED)
  ====================================================== -->

  <!-- Licenses -->
  <section class="card tabpanel hidden" id="tab-licenses">
  <div class="card-title">Licenses</div>

  <div class="table-wrap">
    <table class="table" id="licenses-table">
      <thead>
        <tr>
          <th>SKU</th>
          <th>Total</th>
          <th>Used</th>
          <th>Available</th>
          <th>Status</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td colspan="5" class="muted">Loading licensesâ€¦</td>
        </tr>
      </tbody>
    </table>
  </div>
</section>


  <!-- Devices -->
 <section class="card tabpanel hidden" id="tab-devices">
  <div class="row between">
    <div class="card-title">Devices</div>
    <div class="muted small" id="devices-summary">â€”</div>
  </div>

  <div class="row" style="margin-bottom:12px;">
    <select id="device-filter" class="input">
      <option value="all">All</option>
      <option value="online">Online</option>
      <option value="offline">Offline</option>
    </select>

    <input
      id="device-search"
      class="input"
      placeholder="Search devicesâ€¦"
      style="margin-left:8px;"
    />
  </div>

  <div class="table-wrap">
    <table class="table" id="devices-table">
      <thead>
        <tr>
          <th>Name</th>
          <th>Model</th>
          <th>Status</th>
          <th>Last Seen</th>
          <th>Location</th>
          <th>Notes</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td colspan="6" class="muted">Loading devicesâ€¦</td>
        </tr>
      </tbody>
    </table>
  </div>
</section>


  <!-- Alerts -->
  <section class="card tabpanel hidden" id="tab-alerts">
  <div class="row between">
    <div class="card-title">Health Alerts</div>
    <button class="btn btn-small" id="btn-refresh-alerts">Refresh</button>
  </div>

  <div class="table-wrap">
    <table class="table" id="alerts-table">
      <thead>
        <tr>
          <th>When</th>
          <th>Transition</th>
          <th>Reason</th>
          <th>Notified</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td colspan="4" class="muted">Loading alertsâ€¦</td>
        </tr>
      </tbody>
    </table>
  </div>
</section>


  <!-- Report -->
  <section class="card tabpanel hidden" id="tab-report">
  <div class="row between">
    <div class="card-title">Customer Report</div>
    <button class="btn btn-small" id="btn-open-report">
      Open Full Report
    </button>
  </div>

  <div id="report-preview" class="muted">
    Preparing report previewâ€¦
  </div>
</section>


  <!-- Marker for app.js -->
  <div id="customer-detail" data-key="" class="hidden"></div>

</main>

<script src="/app.js"></script>
</body>
</html>
