<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Customer | US Signal Webex Partner Portal</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="/styles.css">
</head>
<body>
<header class="topbar">
  <div class="brand">
    <img src="/assets/ussignal-logo.jpg" class="logo" alt="US Signal" />
    <div>
      <div class="title">US Signal | Webex Partner Portal</div>
      <div class="subtitle">
        Operational visibility â€¢ Proactive monitoring â€¢ License governance
      </div>
    </div>
  </div>

  <div style="display:flex; align-items:center; gap:16px;">
    <nav class="nav">
      <a href="/">Dashboard</a>
      <a href="/customers">Customers</a>
      <a href="/status">Webex Status</a>
      <a href="/executive">Executive</a>
      <a href="/sow">SOW</a>
    </nav>

    <!-- Theme Toggle -->
    <button id="theme-toggle" title="Toggle light/dark mode">
      ðŸŒ™
    </button>
  </div>
</header>

  <main class="container">
    <div class="page-head">
      <div>
        <h1 id="cust-name">Customer</h1>
        <div class="muted">
          <span class="mono" id="cust-key">â€”</span>
          <span class="dot-sep">â€¢</span>
          <span class="mono" id="cust-org">OrgID: â€”</span>
        </div>
      </div>

      <div class="actions">
        <button class="btn" id="btn-refresh">Refresh</button>
        <button class="btn btn-primary" id="btn-reeval">Manual Re-eval</button>
        <button class="btn" id="btn-print">Print Report</button>
      </div>
    </div>

    <div class="grid-2">
      <div class="card">
        <div class="card-title">Health Summary</div>

        <div class="health-grid">
          <div class="health-cell">
            <div class="muted">Overall</div>
            <div id="health-overall">â€”</div>
          </div>
          <div class="health-cell">
            <div class="muted">Calling</div>
            <div id="health-calling">â€”</div>
          </div>
          <div class="health-cell">
            <div class="muted">Messaging</div>
            <div id="health-messaging">â€”</div>
          </div>
          <div class="health-cell">
            <div class="muted">Meetings</div>
            <div id="health-meetings">â€”</div>
          </div>
          <div class="health-cell">
            <div class="muted">Devices</div>
            <div id="health-devices">â€”</div>
          </div>
          <div class="health-cell">
            <div class="muted">Evaluated</div>
            <div class="mono" id="health-evaluated">â€”</div>
          </div>
        </div>

        <div class="divider"></div>

        <div class="row between">
          <div class="card-title">30-day Trend</div>
          <div class="muted small" id="trend-hint">â€”</div>
        </div>
        <div id="health-trends" class="trend-wrap">â€”</div>

        <div id="transition-banner" class="banner hidden"></div>
      </div>

      <div class="card">
        <div class="row between">
          <div class="card-title">Deficient SKUs</div>
          <button class="btn btn-small" id="btn-email-alert">Send License Alert Email</button>
        </div>

        <div class="table-wrap">
          <table class="table" id="deficient-table">
            <thead>
              <tr>
                <th>SKU</th>
                <th>Available</th>
                <th>Threshold</th>
              </tr>
            </thead>
            <tbody>
              <tr><td colspan="3" class="muted">Loadingâ€¦</td></tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- Tabs -->
    <div class="tabs" role="tablist" aria-label="Customer sections">
      <button class="tab active" data-tab="licenses">Licenses</button>
      <button class="tab" data-tab="devices">Devices</button>
      <button class="tab" data-tab="alerts">Health Alerts</button>
      <button class="tab" data-tab="report">Report</button>
    </div>

    <!-- Licenses -->
    <section class="card tabpanel" id="tab-licenses">
      <div class="row between">
        <div class="card-title">Licenses</div>
        <div class="muted small">Source: Webex Control Hub</div>
      </div>

      <div class="table-wrap">
        <table class="table" id="licenses-table">
          <thead>
            <tr>
              <th>SKU</th>
              <th>Total</th>
              <th>Used</th>
              <th>Available</th>
              <th>Status</th>
            </tr>
          </thead>
          <tbody>
            <tr><td colspan="5" class="muted">Loadingâ€¦</td></tr>
          </tbody>
        </table>
      </div>
    </section>

    <!-- Devices -->
    <section class="card tabpanel hidden" id="tab-devices">
      <div class="row between">
        <div>
          <div class="card-title">Devices</div>
          <div class="muted small">Offline scoring + drill-down (UI ready; API can be added to worker later)</div>
        </div>
        <div class="row gap">
          <select id="device-filter" class="select">
            <option value="all">All</option>
            <option value="offline">Offline / Disconnected</option>
            <option value="online">Online</option>
          </select>
          <input id="device-search" class="input" placeholder="Search devices (name, model, mac, status)" />
        </div>
      </div>

      <div id="devices-summary" class="muted small">â€”</div>

      <div class="table-wrap">
        <table class="table" id="devices-table">
          <thead>
            <tr>
              <th>Name</th>
              <th>Model</th>
              <th>Status</th>
              <th>Last Seen</th>
              <th>Location</th>
              <th>Root Cause</th>
            </tr>
          </thead>
          <tbody>
            <tr><td colspan="6" class="muted">Loadingâ€¦</td></tr>
          </tbody>
        </table>
      </div>

      <div class="muted small">
        Root cause is heuristic: power/network/cloud registration hints based on fields returned by Webex devices API.
      </div>
    </section>

    <!-- Alerts -->
    <section class="card tabpanel hidden" id="tab-alerts">
      <div class="row between">
        <div>
          <div class="card-title">Health Alerts (Audit)</div>
          <div class="muted small">Who was emailed, when, and why â€” UI ready</div>
        </div>
        <button class="btn btn-small" id="btn-refresh-alerts">Refresh Alerts</button>
      </div>

      <div class="table-wrap">
        <table class="table" id="alerts-table">
          <thead>
            <tr>
              <th>When</th>
              <th>From â†’ To</th>
              <th>Why</th>
              <th>Emailed</th>
            </tr>
          </thead>
          <tbody>
            <tr><td colspan="4" class="muted">Loadingâ€¦</td></tr>
          </tbody>
        </table>
      </div>
    </section>

    <!-- Report -->
    <section class="card tabpanel hidden" id="tab-report">
      <div class="row between">
        <div>
          <div class="card-title">Printable Customer Report</div>
          <div class="muted small">One-page executive summary + details</div>
        </div>
        <div class="row gap">
          <button class="btn btn-small" id="btn-open-report">Open Report Page</button>
          <button class="btn btn-small" id="btn-print-inline">Print</button>
        </div>
      </div>

      <div id="report-preview" class="report-preview muted">
        Loading report previewâ€¦
      </div>
    </section>

    <!-- marker for app.js -->
    <div id="customer-detail" data-key="" class="hidden"></div>
  </main>

  <script src="/app.js"></script>
</body>
</html>
